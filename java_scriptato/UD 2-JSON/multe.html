<!DOCTYPE HMTL>
    <hmtl>
        <title>Registro della Multe</title>
    </hmtl>
    <body>
        <h3>Elenco delle Multe</h3>
        <div>
            <button id='btn1'>Cliccami per vedere l'elenco completo delle multe</buttons>
            <span id='span'>...</span>
        </div>

        <div id="view" style="border: solid 1px rgb(200,0,0);"><b>Registro delle Multe:</b><br /></div>
        <br>

        <label> Inserisci la data  collegata alla multa da ricercare :<input type ="text" id ="data"></label>
        <div>
            <button id='btn2'>Cliccami</buttons>
            <span id='span'>...</span>
        </div>
        <div id="view2" style="border: solid 1px rgb(0,200,0);"><b>Multa di:</b><br /></div>
        <br>
        <script>
            async function leggiMulteData(){

                const response = await fetch('multe.json');
                const contatto = await response.json();
                let v = document.querySelector("#view2");

                let data = document.getElementById("data").value;
                let nrJson = contatto.length;

                for(let i = 0; i <nrJson;i++){
                    alert("toc toc");
                    if(data[i] == contatto[i].data.value){
                        leggiMulta();
                    }
                }
            }
            // Funzione per leggire la sungola multa collegata alla data
            async function leggiMulta(){

                const response = await fetch('multe.json');
                const contatto = await response.json();

                let v = document.querySelector("#view2");

                    v.innerHTML += contatto.cognome + "<br />";
                    v.innerHTML += contatto.nome  + "<br />";
                    v.innerHTML += contatto.data  + "<br />";
                    v.innerHTML += contatto.targa + "<br />";
                    v.innerHTML += contatto.punti + "<br />";
                    v.innerHTML += "<br />";
            }

            async function leggiMulte(){
                
                const response = await fetch('multe.json');
                const contatto = await response.json();
                let nrJson = contatto.length;
                let v = document.querySelector("#view");
                for(let i=0; i<nrJson; i++){
                    v.innerHTML += contatto[i].cognome + "<br />";
                    v.innerHTML += contatto[i].nome + "<br />";
                    v.innerHTML += contatto[i].data + "<br />";
                    v.innerHTML += contatto[i].targa + "<br />";
                    v.innerHTML += contatto[i].punti+ "<br />";
                    v.innerHTML += "<br />";
                }
            }
            // Serve per leggere l' elenco completo delle multe di tutto il json
            let btn1 = document.querySelector("#btn1");
            btn1.onclick = leggiMulte;

            let btn2 =  document.querySelector("#btn2");
            btn2.onclick = leggiMulteData;
            
        </script>
    </body>
</hmtl>